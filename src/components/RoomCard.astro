---
import CTAButton from './CTAButton.astro';

interface Props {
  title: string;
  description: string;
  features: string[];
  price?: string;
  img?: string;
  alt?: string;
}

const { title, description, features, price, img, alt } = Astro.props;
---

<article
  class="room-card bg-white rounded-2xl md:rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 group border border-negro-suave/5"
>
  <!-- Image -->
  <div
    class="relative h-48 md:h-64 overflow-hidden bg-gradient-to-br from-beige-premium to-cafe-claro/20"
  >
    {
      img ? (
        <img
          src={img}
          alt={alt || title}
          class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"
          loading="lazy"
          decoding="async"
        />
      ) : (
        <div class="w-full h-full bg-gradient-to-br from-cafe-claro/30 to-verde-oliva/20 group-hover:scale-110 transition-transform duration-700" />
      )
    }
    <!-- Decorative overlay for better text readability -->
    <div
      class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"
    >
    </div>
    {
      price && (
        <div class="absolute top-3 right-3 md:top-4 md:right-4 bg-gradient-to-r from-verde-oliva to-verde-oliva/90 text-white px-3 md:px-4 py-1.5 md:py-2 rounded-full font-semibold z-10 text-xs md:text-sm shadow-lg">
          {price}
        </div>
      )
    }
    <!-- Room type badge móvil -->
    <div class="absolute bottom-3 left-3 md:hidden">
      <span
        class="bg-white/90 backdrop-blur-sm text-negro-suave text-[10px] font-medium tracking-wider uppercase px-2.5 py-1 rounded-full"
      >
        Premium
      </span>
    </div>
  </div>

  <!-- Content -->
  <div class="p-5 md:p-6">
    <h3 class="font-serif text-xl md:text-2xl font-bold text-negro-suave mb-2 md:mb-3">{title}</h3>
    <p
      class="text-negro-suave/70 mb-4 leading-relaxed text-sm md:text-base line-clamp-2 md:line-clamp-none"
    >
      {description}
    </p>

    <!-- Features - Diseño compacto para móvil -->
    <ul class="space-y-1.5 md:space-y-2 mb-5 md:mb-6">
      {
        features.slice(0, 4).map((feature, index) => (
          <li
            class={`flex items-center text-xs md:text-sm text-negro-suave/70 ${index >= 3 ? 'hidden md:flex' : ''}`}
          >
            <svg
              class="w-4 h-4 md:w-5 md:h-5 text-verde-oliva mr-2 flex-shrink-0"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M5 13l4 4L19 7"
              />
            </svg>
            <span class="truncate">{feature}</span>
          </li>
        ))
      }
      {
        features.length > 4 && (
          <li class="text-xs text-verde-oliva font-medium md:hidden pl-6">
            +{features.length - 3} más incluido
          </li>
        )
      }
    </ul>

    <!-- CTA - Versión móvil mejorada -->
    <div class="space-y-2">
      <CTAButton text="Reservar" size="sm" class="w-full" />
      <p class="text-center text-[10px] text-negro-suave/60 tracking-wide md:hidden">
        Confirmación inmediata
      </p>
    </div>
  </div>
</article>

<style>
  .room-card {
    transition:
      transform 0.3s ease,
      box-shadow 0.3s ease;
    will-change: transform;
    contain: layout style paint;
  }

  @media (hover: hover) {
    .room-card:hover {
      transform: translateY(-4px) translateZ(0);
    }
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
